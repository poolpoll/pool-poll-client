<dom-module id="free-poll-menu-list">
	<template>
		<custom-ajax
			auto
		 	resource-url="menus"
		 	handle-as="json"
		 	last-response="{{menuList}}">
	 	</custom-ajax>

	 	<paper-toolbar>
	 		<span>Free Poll</span>
	 	</paper-toolbar>

		<template is="dom-repeat" items="{{menuList}}">
			<paper-item on-tap="_menuSelected">[[item.name]]</paper-item>
		</template>
	</template>
	<script>
		Polymer({
			is: 'free-poll-menu-list',

			properties: {

				menuList: {
					type: Array,
					observer: '_menuListChanged'
				}
			},

			_menuListChanged: function(menuList) {
				if(!menuList) {
					app.route = 'sign_in';
					app.title = 'Sign In';
				} else {
					app.route = 'my_polls';
					app.title = 'My Polls';
				}
			},

			_menuSelected: function(event) {
				app.route = event.model.item.route;
				app.title = event.model.item.name;
			}
		})
	</script>
</dom-module>