<dom-module id="free-poll-main">
	<template>
		<!-- header content -->
		<free-poll-header title="[[title]]"></free-poll-header>

		<!-- view list -->
		<iron-pages attr-for-selected="route" selected="{{route}}">
			<new-poll route="new_poll"></new-poll>
			<my-poll route="my_polls"></my-poll>
			<sign-in route="sign_in"></sign-in>
		</iron-pages>

		<free-poll-drawer id="side-menu"></free-poll-drawer>
	</template>
	<script>
		Polymer({
			is: 'free-poll-main',

			properties: {

				route: {
					type: String,
					observer: '_routeChanged'
				},

				title: {
					type: String,
				}
			},

			/**
			 * 페이지가 로딩 되고 route 값이 없으면 my poll로 이동
			 */
			attached: function() {
				if(!app.route || app.route == '') {
					app.route = 'my_polls';
					app.title = 'My Polls';
				};
			},

			/**
			 * routeUrl이 변경될 때 마다 호출한다.
			 */
			_routeChanged: function(route) {
				this.$['side-menu'].close();
			}
		})
	</script>
</dom-module>