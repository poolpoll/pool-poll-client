<dom-module id="free-poll-header">
	<template>
		<style>
			.flex {
				@apply(--layout-flex);
			}
			.toolbar {
				height: 8.5vh;
				font-size: 16px;
				color: #ffffff;
				background: linear-gradient( to bottom, #3BB5A3, #00A2D9 );
				display: flex;
				flex-direction: row;
				z-index: 10;
			}
			#swipe-back-icon {
				height: 4vh;
			}
			#header-icon {
				height: 5.5vh;
				margin: auto;
			}
			.menu-icon-container {
				height: 2.5vh
			}
			#menu-icon {
				display: block;
				height: 2.5vh
			}
		</style>
		<app-toolbar id="header-toolbar" class="toolbar" hidden="[[hideHeaderToolbar]]">
			<img id="swipe-back-icon" src="../../assets/images/back.png" on-tap="_routeBack">
			<img id="header-icon" src="../../assets/images/header_icon.png">
			<div class="menu-icon-container">
				<img id="menu-icon" src="../../assets/images/menu_icon.png" on-tap="_drawerToggled">
			</div>
		</app-toolbar>

		<mg-tab-view id="tab-view" headers="[[headers]]" selected="my-poll" hidden="[[hideHeaderTab]]"></mg-tab-view>
		<img id="search-icon" style="height:6vw; margin:auto; padding-left: 5vw; padding-right:5vw;" hidden src="../../assets/images/search_icon.png" on-tap="searchIconTapped">
	</template>
	<script>
		Polymer({
			is: 'free-poll-header',

			properties: {
				headers: {
					type: Array,
					value: function() {
						return [{
              id: 'my-poll',
              title: 'MY POLL'
            }, {
              id: 'top',
              title: 'TOP 100'
            }, {
              id: 'tag',
              title: '# TAG'
            }]
					}
				},

				hideHeaderToolbar: {
					type: Boolean,
					value: true
				},

				hideHeaderTab: {
					type: Boolean,
					value: true
				},

				hideMenuBtn: {
					type: Boolean,
					value: false
				},

				hideTapView: {
					type: Boolean
				}
			},

			ready: function() {
				document.addEventListener('route-changed-to-main', function(event) {
					this.hideHeaderTab = false;
					this.hideHeaderToolbar = false;
				}.bind(this));

				document.addEventListener('hide-header-tab', function(event) {
					this.hideHeaderTab = true;
				}.bind(this));

				var searchIcon = this.$['search-icon'];
				this.$['tab-view'].appendTab(searchIcon);
			},

			searchIconTapped: function(event) {
				this.$['upload-input'].tap();
			},

			_drawerToggled: function(event) {
				this.fire('mg-side-menu-toggle', event);
			},

			_routeBack: function() {
				switch(app.route) {
					case 'new-poll': page('/main');

					default: page('/main');
				}
			}
		})
	</script>
</dom-module>
