<script src='../../bower_components/d3/d3.js'></script>

<dom-module id="chart-bar">
  <template>
    <style>
      .horizontal {
        @apply(--layout-horizontal);
        @apply(--layout-flex);
      }
      .chart-section {
        @apply(--layout-horizontal);
        @apply(--layout-flex);
        padding: 3%;
      }
      .chart-section svg {
        height: 20px;
        width: 100%;
      }
      .flex {
        @apply(--layout-flex);
      }
    </style>

    <div class="horizontal">
      <span class="flex"><iron-icon class="flex" icon="icons:check"></iron-icon>선택지: [[name]]</span>
      <span class="flex"><iron-icon class="flex" icon="social:poll"></iron-icon>현재까지 [[data]]명 선택</span>
    </div>

    <div class="chart-section">
      <svg id="chart-section"></svg>
      <paper-checkbox></paper-checkbox>
    </div>
  </template>
  <script>
    Polymer({
      is: 'chart-bar',

      properties: {
        autoRender: {
          type: Boolean,
          value: true
        },

        data: {
          type: Array,
          value: [],
          observer: '_dataChanged'
        }
      },

      _dataChanged: function(data) {
        if(this.autoRender) this.renderChart(data);
      },

      renderChart: function(rawData) {
        var data = [rawData];

        d3.select(this.$['chart-section'])
          .selectAll('rect')
          .data(data)
          .enter()
          .append('rect')
          .attr("x", 0)
          .attr("y", 0)
          .attr("width", data => { return data * 10; })
          .attr("height", 20)
          .attr("fill", "hotpink");
      }
    })
  </script>
</dom-module>
